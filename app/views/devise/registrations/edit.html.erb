<% content_for(:title, "#{current_user.user_name} - update profile" )%>
<div class="clearfix"></div>
<div id="content">
  <div class="container">
    <div class="row justify-content-md-center">
          <div class="col col-lg-12 col-xl-10">
        <div class="row has-sidebar">
          <div class="col-md-5 col-lg-4 col-xl-4 col-sidebar">
                <%= render "shared/user_Profile_Menu" %>
          </div>
          <div class="col-md-7 col-lg-8 col-xl-8">
            <div class="page-header bordered">
              <h1>Change Password</h1>
            </div>
            <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
            <%= devise_error_messages! %>

            <div class="form-group">
              <label>Email</label>
              <%= f.email_field :email, autofocus: true, autocomplete: "email",:class=>"form-control form-control-lg" %>
            </div>

            <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
              <div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
            <% end %>

             <div class="form-group">
              <label>New Password <i>(leave blank if you don't want to change it)</i></label>
              <% if @minimum_password_length %>
                <br />
                <em><%= @minimum_password_length %> characters minimum</em>
              <% end %>
              <%= f.text_field :password, autocomplete: "new-password", :class=>"form-control form-control-lg" %>
              </div>

              <div class="form-group">
                <label>Confirm New Password</label>
                <%= f.label :password_confirmation %><br />
                <%= f.text_field :password_confirmation, autocomplete: "new-password", :class=>"form-control form-control-lg" %>
              </div>

              <div class="form-group">
                <label>Your Current Password <i>(we need your current password to confirm your changes)</i></label>
                <%= f.password_field :current_password, autocomplete: "current-password", :class=>"form-control form-control-lg" %>
              </div>
              
               <div class="form-group pb-5">
                <%= f.submit "Update Password", :class=>"btn btn-primary" %>
              </div>

            <% end %>

             <div class="form-group py-5">
                <%= link_to registration_path(resource_name), :class=>"btn btn-danger btn-sm", method: :delete, data: { confirm: 'Are you sure?' } do%>
                  <i class="fa fa-trash" aria-hidden="true"></i>
                    Delete my Account 
                  <% end %>
             </div>
           </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
